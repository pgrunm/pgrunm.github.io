<!doctype html><html lang=en><head><title>GPT and MBR: Moving from MBR to GPT · Engineering Blog
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Pascal Grundmeier"><meta name=description content="Information on GPT and how to move from MBR to GPT."><meta name=keywords content="blog,devops engineer,site reliability engineer"><meta name=twitter:card content="summary"><meta name=twitter:title content="GPT and MBR: Moving from MBR to GPT"><meta name=twitter:description content="Information on GPT and how to move from MBR to GPT."><meta property="og:url" content="https://pgrunm.github.io/posts/mbr_and_gpt/"><meta property="og:site_name" content="Engineering Blog"><meta property="og:title" content="GPT and MBR: Moving from MBR to GPT"><meta property="og:description" content="Information on GPT and how to move from MBR to GPT."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-04-19T21:45:07+01:00"><meta property="article:modified_time" content="2020-04-19T21:45:07+01:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Windows"><meta property="article:tag" content="Hard Drive"><meta property="article:tag" content="GPT"><meta property="article:tag" content="MBR"><link rel=canonical href=https://pgrunm.github.io/posts/mbr_and_gpt/><link rel=preload href="https://pgrunm.github.io/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://pgrunm.github.io/css/coder.min.0669b62fc2c181a12a4ba10be9984e385c9a5e83dc7cb7ae3759ad0b98d7e8b2.css integrity="sha256-Bmm2L8LBgaEqS6EL6ZhOOFyaXoPcfLeuN1mtC5jX6LI=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://pgrunm.github.io/css/coder-dark.min.f6534b0b446b75d9b6ad77a97d43ede2ddaeff1b6e2361fb7198d6f8fcb7f83f.css integrity="sha256-9lNLC0Rrddm2rXepfUPt4t2u/xtuI2H7cZjW+Py3+D8=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=https://pgrunm.github.io/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://pgrunm.github.io/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=https://pgrunm.github.io/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=https://pgrunm.github.io/images/apple-touch-icon.png><link rel=manifest href=https://pgrunm.github.io/site.webmanifest><link rel=mask-icon href=https://pgrunm.github.io/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.128.2"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://pgrunm.github.io/>Engineering Blog
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://pgrunm.github.io/>Home</a></li><li class=navigation-item><a class=navigation-link href=https://pgrunm.github.io/posts/>Articles</a></li><li class=navigation-item><a class=navigation-link href=https://pgrunm.github.io/about/>About Me</a></li><li class=navigation-item><a class=navigation-link href=https://pgrunm.github.io/contact/>Contact</a></li><li class=navigation-item><a class=navigation-link href=https://pgrunm.github.io/index.xml>RSS</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://pgrunm.github.io/posts/mbr_and_gpt/>GPT and MBR: Moving from MBR to GPT</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2020-04-19T21:45:07+01:00>April 19, 2020
</time></span><span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
3-minute read</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=https://pgrunm.github.io/tags/linux/>Linux</a>
</span><span class=separator>•</span>
<span class=tag><a href=https://pgrunm.github.io/tags/windows/>Windows</a>
</span><span class=separator>•</span>
<span class=tag><a href=https://pgrunm.github.io/tags/hard-drive/>Hard Drive</a>
</span><span class=separator>•</span>
<span class=tag><a href=https://pgrunm.github.io/tags/gpt/>GPT</a>
</span><span class=separator>•</span>
<span class=tag><a href=https://pgrunm.github.io/tags/mbr/>MBR</a></span></div></div></header><div class=post-content><h2 id=intro>Intro
<a class=heading-link href=#intro><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>About a year ago I bought a used hard drive from a colleague of mine. This HDD has a size of 3 TiB and is supposed to hold big files like videos, images and some games that are neigher read nor write intensive. Unfortunately I moved from my previous HDD with a Master Boot Record (MBR) and kept using the MBR.</p><p>This turned out to be a problem since MBR doesn&rsquo;t support partitions larger than 2 TiB so I could not use all of my 3 TiB drive.</p><h3 id=a-brief-overview-about-mbr>A brief overview about MBR
<a class=heading-link href=#a-brief-overview-about-mbr><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>I don&rsquo;t want to get soo deep into history about MBR because it is pretty old. If you&rsquo;re interested in it&rsquo;s history you can find a lot <a href=https://en.wikipedia.org/wiki/Master_boot_record class=external-link target=_blank rel=noopener>about this</a> on the internet. The MBR contains the bootsector of a disk and starts your operating system.</p><p>As the MBR is pretty old one of it&rsquo;s downsides is the size limitation of partitions up to 2 TiB. You also can not have more than four primary partitions. If you want to have than four partitions you have to convert a primary partition to an extended partition. This extended partition can hold multiple logical partitions within.</p><h2 id=the-new-guid-partition-table-gpt>The new GUID partition table (GPT)
<a class=heading-link href=#the-new-guid-partition-table-gpt><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>After the standardization of the Unified Extensible Firmware Interface (UEFI) where the GPT is also part of BIOS has been used less and instead UEFI became more popular. The GPT of a disk consists of</p><ul><li>A master boot record in sector 0 (so MBR only operating systems can still boot)</li><li>A primary <a href=https://en.wikipedia.org/wiki/Universally_unique_identifier class=external-link target=_blank rel=noopener>GUID</a> partition table</li><li>At least 128 partitions and drives with a capacity up 8 <a href=https://en.wikipedia.org/wiki/Binary_prefix#zebi class=external-link target=_blank rel=noopener>ZiB</a></li><li>Supported operating systems: GNU/Linux, <a href=https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-and-gpt-faq#can-windows-vista-windows-server-2008-and-later-read-write-and-boot-from-gpt-disks class=external-link target=_blank rel=noopener>Windows Vista and later</a></li></ul><h2 id=moving-from-mbr-to-gpt>Moving from MBR to GPT
<a class=heading-link href=#moving-from-mbr-to-gpt><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>I wanted to this for longer but until now I didn&rsquo;t have time to read about this topic on the internet. Before making any changes to your system always make up a backup and try to restore some files. I really can recommend using <a href=https://clonezilla.org/ class=external-link target=_blank rel=noopener>Clonezilla</a> for this, as it&rsquo;s open source and works with many many filesystems (you should give it a try).</p><h3 id=converting-the-master-boot-record>Converting the Master Boot Record
<a class=heading-link href=#converting-the-master-boot-record><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>You can easily convert the Master Boot Record with the open source program <a href=https://www.rodsbooks.com/gdisk/walkthrough.html class=external-link target=_blank rel=noopener>gdisk</a>. It is already included in the <a href=https://gparted.org/livecd.php class=external-link target=_blank rel=noopener>Gparted Live distribution</a>, which you just have to boot and open up a terminal.</p><p>Inside the terminal you just have the following commands:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Run this to the appropiate disk in my casee /dev/sda</span>
</span></span><span style=display:flex><span>gdisk /dev/sda
</span></span><span style=display:flex><span><span style=color:#75715e># Enter the recovery menu with r</span>
</span></span><span style=display:flex><span>r
</span></span><span style=display:flex><span><span style=color:#75715e># Load the MBR and create a GPT from this</span>
</span></span><span style=display:flex><span>f
</span></span><span style=display:flex><span><span style=color:#75715e># Write the data to disk</span>
</span></span><span style=display:flex><span>w
</span></span></code></pre></td></tr></table></div></div><p>Pretty simple isn&rsquo;t it? I had to search a little while for this on the internet and you can find a lot of stuff from 3rd party tools. I found a good way for me to this with just four basic commands.</p><h2 id=summary-gpt-vs-mbr>Summary: GPT vs MBR
<a class=heading-link href=#summary-gpt-vs-mbr><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>To sum up you can find in this table which explains some of the differences between the MBR and the GPT.</p><table><thead><tr><th></th><th>MBR</th><th>GPT</th></tr></thead><tbody><tr><td>Number of supported partitions</td><td>Up to 4 primary partions or more with an extended partition</td><td>Up to 128 partitions (natively!)</td></tr><tr><td>Maximum size of partitions</td><td>Maximum size is 2 TiB per partition</td><td>According to <a href=https://developer.ibm.com/tutorials/l-gpt/ class=external-link target=_blank rel=noopener>IBM</a> support for up to eight zebibytes</td></tr><tr><td>Supports BIOS / UEFI</td><td>Only BIOS supported</td><td>Yes/Yes</td></tr><tr><td>Supported operating systems:</td><td>Almost any operating system</td><td>More information can be found <a href=https://en.wikipedia.org/wiki/GUID_Partition_Table#Operating-system_support class=external-link target=_blank rel=noopener>here</a></td></tr></tbody></table><p>If you&rsquo;re using newer hardware (like a mainboard with an UEFI) it is a good idea to use GPT instead of the old fashioned MBR.</p><h3 id=further-reading>Further reading
<a class=heading-link href=#further-reading><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>The <a href=https://rodsbooks.com/gdisk/ class=external-link target=_blank rel=noopener>GPT fdisk tutorial</a>.</li><li>IBM&rsquo;s <a href=https://developer.ibm.com/tutorials/l-gpt/ class=external-link target=_blank rel=noopener>Linux and GPT</a> tutorial.</li></ul></div><footer></footer></article><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css integrity=sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0 crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js integrity=sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})'></script></section></div><section class=container><center>© 2019 - 2024 | Built with &#9829;&#xfe0f; by Pascal Grundmeier - DevOps engineering at scale.</center></section></main><script src=https://pgrunm.github.io/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>